<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <title>Your advancer - Add Review</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" th:href="@{../../css/bootstrap.css}"   type="text/css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css"  />
	<link  type="text/css" href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">	
	<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" type="text/css" th:href="@{../../css/animate.css}">
	<link rel="stylesheet" type="text/css" th:href="@{../../css/owl.carousel.min.css}">
	<link rel="stylesheet" type="text/css" th:href="@{../../css/owl.theme.default.min.css}">
	<link rel="stylesheet" type="text/css" th:href="@{../../css/magnific-popup.css}">
	<link rel="stylesheet" type="text/css" th:href="@{../../css/bootstrap-datepicker.css}">
	<link rel="stylesheet" type="text/css" th:href="@{../../css/jquery.timepicker.css}">
	<link rel="stylesheet" type="text/css"  th:href="@{../../css/flaticon.css}">
	<link rel="stylesheet" type="text/css" th:href="@{../../css/style.css}">
	 
	    <style>
	    
	        body {
	      background-color:  #f2f2f2;
	    }
	    .box1 {
	     background-color:  #ffffff;
          width: 1200px !important;
        
          padding: 20px ;
         margin: -1px;
         }
         hr { 
         width: 1120px !important ; 
         margin-right: 100px   !important ; 
        }
          .stars-outer {
  position: relative;
  display: inline-block;
  font-size: 25px ; 
}

.stars-inner {
  position: absolute;
  top: 0;
  left: 0;
  white-space: nowrap;
  overflow: hidden;
  width: 0;
    font-size: 25px ; 
}
.stars-outer::before {
  content: "\f005 \f005 \f005 \f005 \f005";
  font-family: "Font Awesome 5 Free";
  font-weight: 900;
  color: #ccc;
    font-size: 25px ; 
}

.stars-inner::before {
  content: "\f005 \f005 \f005 \f005 \f005";
  font-family: "Font Awesome 5 Free";
  font-weight: 900;
  color: #f8ce0b;
}

        
	    </style>
  </head>
  <body>
		<div class="wrap">
	    <div class="container">
				<div class="row justify-content-between">
					<div class="col-3 d-flex align-items-center">
						<a class="navbar-brand d-flex" href="/user/home">
							<div class="icon d-flex align-items-center justify-content-center">
								<img src="../../static/images/logoooo.png" alt="logo" style="width:40px;">
							</div>Your Advancer
						</a>
					</div>
					<div class="col-3 d-flex justify-content-end align-items-center">
						<div class="social-media">
			    		<p class="mb-0 d-flex">
			    			<a href="#" class="d-flex align-items-center justify-content-center"><span class="fa fa-facebook"><i class="sr-only">Facebook</i></span></a>
			    			<a href="#" class="d-flex align-items-center justify-content-center"><span class="fa fa-twitter"><i class="sr-only">Twitter</i></span></a>
			    			<a href="#" class="d-flex align-items-center justify-content-center"><span class="fa fa-instagram"><i class="sr-only">Instagram</i></span></a>
			    			<a href="#" class="d-flex align-items-center justify-content-center"><span class="fa fa-dribbble"><i class="sr-only">Dribbble</i></span></a>
			    		</p>
		        		</div>
					</div>
				</div>
			</div>
		</div>
		
		<section class="menu-wrap flex-md-column-reverse d-md-flex">
			<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
		    	<div class="container">
		     	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
		        	<span class="fa fa-bars"></span> Menu
		      	</button>
		        <div class="req-button order-lg-last">
		      		<a href="/user/add-product"><span class="fa fa-upload" aria-hidden="true"></span> Add product</a>
	        	</div>
		        <div class="dropdown order-lg-last ml-4 dark-text">
			        <a  id="dropdownMenuButton" data-toggle="dropdown" class= " dark-text" aria-haspopup="true" aria-expanded="false">
			          <i class="fa fa-user-circle-o"  style="font-size: 20px;" aria-hidden="true" ></i> welcome , <i th:value="${user.username}"  th:text="${user.username}"></i>     <i class="fa fa-chevron-down" aria-hidden="true"></i>   
			        </a>
	          		<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
			           <a class="dropdown-item" href="/logout"> <i class="fa fa-sign-out" ></i> Logout </a>
			           <a class="dropdown-item" href="/user/Account">  <i class="fa fa-refresh"></i> Account</a>
	           		</div>
         		</div>
		      	<div class="collapse navbar-collapse" id="ftco-nav">
			        <ul class="navbar-nav mr-auto">
			        	<li class="nav-item active"><a href="/user/home" class="nav-link">Home</a></li>
			        	<li class="nav-item"><a href="/#about" class="nav-link">About</a></li>
				<li class="nav-item dropdown">
		        	<a href="/Products" class="nav-link"  id="dropdowncol" data-toggle="dropdown"  aria-haspopup="true" aria-expanded="false">Our products</a>
		        	<div class="dropdown-menu" aria-labelledby="dropdowncol">
			           <a    class="dropdown-item" th:href="@{/Products/{title}(title=${category.Title})}" th:each="category : ${categories}" th:value="${category.Title}"  th:text="${category.Title}"></a>
	           		</div>
		        	</li>			        	<li class="nav-item"><a href="/user/Contact" class="nav-link">Contact</a></li>
			       <li class="nav-item" th:switch="${user.Role}">
                     <a th:case="'ADMIN'" class="nav-link" href="/admin/home"> Admin Page</a>
                    </li>
			        </ul>
		      	</div>
		    </div>
		  </nav>
	    <!-- END nav -->
	   		<div class="hero-wrap hero-wrap-2" style="background-image: url('../../static/images/fix-bad-reviews.jpg');" data-stellar-background-ratio="0.5">
		      <div class="overlay"></div>
		      <div class="container">
		        	<div class="row no-gutters slider-text align-items-end">
		          		<div class="col-md-9 ftco-animate pb-5"> 
		          			<p class="breadcrumbs mb-2"><span class="mr-2"><a href="/">Home <i class="fa fa-chevron-right"></i></a></span> <span>Reviews <i class="fa fa-chevron-right"></i></span></p>
	                		<h1 class="mb-0 bread">Reviews</h1>
		          		</div>
		        	</div>
		      </div>
		    </div>
		</section>

 	<section class="ftco-section ftco-degree-bg" style="margin-left:10% !important" >
	    	<div class="container-fluid ">
	        	<div class="row">
	          		<div class="col-lg-8 order-lg-last ftco-animate">
	              		<ul class="comment-list">
	            			<li class="">
			                  <div class="vcard bio">
			                    <img  th:src="*{'data:img/png;base64,'+{product.userp.imageU}}" class="ml-4 mt-3" alt="Image placeholder">
			                  </div>
			                  <div class="comment-body mt-2">
			                    <h3 th:text=${product.userp.username}></h3>
	                    		<div class="meta">
	                    			<span class="fa fa-chevron-circle-down" th:text=${product.dateofcreation}></span>
	                    		</div>
	                    		</div>
	                		</li>
	                		  <li> 
	                	    <h3 th:text=${product.nom} style="margin-left:5% ;"></h3>
 	                	
	                	   </li>
	                		
	              		</ul>
	              		<div class="box1">
	          			
						
	              			<img th:src="*{'data:img/png;base64,'+{product.img}}" class="img-fluid mb-8" style=" width: 450px ; height: 420px ;margin-left:30%  ">
	            
	            			<h3 class="mb-3" >Description </h3>
	          				<p  th:text=${product.description}></p>
	                  	
	                    </div>
	          <br>
	                  <div class="row box1">
	              <table style=" float : left ; margin-right : 20% ;" >
	              <tr>
	              <td style ="width: 1200px ;overflow-x:auto;">
	                  <table style="float: right !important ; margin-left : 50% ; display: inline-block;" >
	                 
	                  <tr class="carac1" >
	                  <td th:text="${product.category.carac1}"  ></td>
	                   <td>
                         <div class="stars-outer">
                         <div class="stars-inner"></div>
                         </div>
                         <span class="number-rating"></span>
                         </td>
	                  <td th:value="${product.ratec1}" id="cr1"></td>
	                  </tr>
	                  <tr  class="carac2">
	                  <td th:text="${product.category.carac2}" > </td>
	                   <td>
                              <div class="stars-outer">
                             <div class="stars-inner"></div>
                          </div>
                          <span class="number-rating"></span>
                    
                            </td>
	                  <td th:value="${product.ratec2}"  id="cr2"></td>
	                  </tr>
	                  <tr class="carac3" >
	                  <td  th:text="${product.category.carac3}"  > </td>
						   <td>
					          <div class="stars-outer">
					            <div class="stars-inner"></div>
					          </div>
					          <span class="number-rating"></span>
					        </td>
	                  <td th:value="${product.ratec3}" id="cr3" ></td>
	                  </tr>
	                  
	                   <tr class="carac4">
	                  <td  th:text="${product.category.carac4}" ></td>
	                   <td>
					          <div class="stars-outer">
					            <div class="stars-inner"></div>
					          </div>
					          <span class="number-rating"></span>
					        </td>
	                  <td th:value="${product.ratec4}" id="cr4"></td>
	                  </tr>
	                <tr class="carac5">
	                  <td  th:text="${product.category.carac5}" > </td>
	                   <td>
				          <div class="stars-outer">
				            <div class="stars-inner"></div>
				          </div>
				          <span class="number-rating"></span>
				        </td>
	                  <td th:value="${product.ratec5}" id="cr5"></td>
	                 </tr>
	               
	                  </table>
	              
	              
	              </td>
	              <td style ="width: 350px; text-align: center">
	              <strong> <h1 style=" font-size:250px   ;"  th:text="${product.avisss.size}" ></h1></strong>
	                 
	            
	              </td>
	              </tr>
	              
	              </table>
	                  
	                      
	                
	                  
	                 
	            
	                  </div>
	                   <hr>
	            
	
	
	
	            <div class="pt-5 mt-5"    >
	            <h3> Reviews : </h3>
	            <div class="alert alert-danger" role="alert" th:text="${error}" th:if="${error}"></div>
<div class="alert alert-primary" role="alert" th:text="${success}" th:if="${success}"></div>
	            <br>
	              <ul class="comment-list" >
	             <div  th:each="avis : ${product.avisss}">
	              
	                <li class="comment box1">
	                	                 	               
	              <br>
	                
	                  <div class="vcard bio" >
	                    <img  th:src="*{'data:img/png;base64,'+{avis.user.imageU}}"  class="ml-2" alt="Image placeholder">
	                  </div>
	                 
	                  <div class="comment-body">
	                  <!-- reviewwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww -->
	                  
	                    <h3   style=" font-size :16px ; margin-top : 5px !important; " th:text=${avis.user.username}></h3>
	                    <div class="meta"><span class="fa fa-chevron-circle-down" th:text="${avis.dateofcreation}"></span></div>
	    
	                  <hr>
	                   <div  style="color : #000000; font-size : 18px ; " th:text="${avis.comment}"></div>
	                 <table>
	               
	                  <tr>
	                  <td th:text="${product.category.carac1}" ></td>
	                  <td>
	                  <div style=" border-radius:50%; padding: 5px; border: 1px solid ; background-color : #d9ba2b; ; color:#ffffff">
	                  
	                  <a th:text="${avis.c1}"></a>
	                  <a>/5</a>
	                  
	                  </div>
	                  </td>
	                  </tr>
	                    <tr>
	                  <td th:text="${product.category.carac2}" > </td>
	                 <td>
	                  <div style=" border-radius:50%; padding: 5px; border: 1px solid ; background-color : #d9ba2b; ; color:#ffffff">
	                  
	                  <a th:text="${avis.c2}"></a>
	                  <a>/5</a>
	                  
	                  </div>
	                  </td>
	                  </tr>
	                   <tr>
	                  <td  th:text="${product.category.carac3}"> </td>
	                  <td>
	                  <div style=" border-radius:50%; padding: 5px; border: 1px solid ; background-color : #d9ba2b; ; color:#ffffff">
	                  
	                  <a th:text="${avis.c3}"></a>
	                  <a>/5</a>
	                  
	                  </div>
	                  </td>
	                  </tr>
	                  
	                       <tr>
	                  <td  th:text="${product.category.carac4}"></td>
	                  <td>
	                  <div style=" border-radius:50%; padding: 5px; border: 1px solid ; background-color : #d9ba2b; ; color:#ffffff">
	                  
	                  <a th:text="${avis.c4}"></a>
	                  <a>/5</a>
	                  
	                  </div>
	                  </td>
	                  </tr>
	                <tr>
	                  <td  th:text="${product.category.carac5}"> </td>
	                 <td>
	                  <div style=" border-radius:50%; padding: 5px; border: 1px solid ; background-color : #d9ba2b; ; color:#ffffff">
	                  
	                  <a th:text="${avis.c5}"></a>
	                  <a>/5</a>
	                  
	                  </div>
	                  </td>
	                 </tr>
	               
	                  </table>
	                  
	                  
	                   
	                 <hr> 
	
	                    
	                     <P>
	                       <a th:href="@{/user/like/{idp}/{id}/{userid}(idp=${product.idp},id=${avis.id},userid=${user.id})}" class="mr-4" ><span class="fa fa-thumbs-up" aria-hidden="true" ></span> Like </a>
	                      <a th:href="@{/user/dislike/{idp}/{id}/{userid}(idp=${product.idp},id=${avis.id},userid=${user.id})}" class="mr-4"><span class="fa fa-thumbs-down" aria-hidden="true"></span> Dislike</a>
	                      <a th:href="@{/user/report/{idp}/{id}/{userid}(idp=${product.idp},id=${avis.id},userid=${user.id})}" class="mr-4"><span class="fa fa-comment" aria-hidden="true"></span> report</a>
	                      <a href="#" class="mr-4" style="color: grey; " >  <span class="fa fa-thumbs-up" aria-hidden="true" th:text="${avis.nblike}" ></span></a> 
	                      <a href="#" class="mr-4" style="color: grey "> <span class="fa fa-thumbs-down " aria-hidden="true" th:text="${avis.nbdislike}" ></span></a> 
	                   </p>
	                  </div>
	                  
	                </li>
	</div>
	                
	              </ul>
                 
              <!-- END comment-list -->
              
              <div class="comment-form-wrap pt-5">
                <h3 class="mb-5">Leave a review</h3>
                <form action="#" class="p-5 bg-light" th:action="@{/user/add-review/{id}(id=${product.idp})}"  method="post">

    
	                  
	
	                   
	                      	<label class="mb-4" th:text="${product.category.carac1}"></label><br/>
	                        <input type="range" min="0" max="5" value="3" class="c1" id="note"  th:value="${avis.c1}" name="c1">
	                        <label><span  id="demo"></span></label><br/><br/>
	                      
	                      	<label class="mb-4" th:text="${product.category.carac2}"></label><br/>
	                        <input type="range" min="0" max="5" value="3" class="c2" id="note" th:value="${avis.c2}" name="c2">
	                        <label><span  id="demo"></span></label><br/><br/>
	
	                        <label  class="mb-4" th:text="${product.category.carac3}"></label>
	                        <input type="range" min="0" max="5" value="3" class="c3" id="note" th:value="${avis.c3}" name="c3">
	                        <label><span  id="demo"></span></label><br/><br/>
	                    
	                        <label class="mb-4" th:text="${product.category.carac4}"></label>
	                        <input type="range" min="0" max="5" value="3" class="c4" id="note" th:value="${avis.c4}" name="c4">
	                        <label><span  id="demo"></span></label><br/><br/>  
	                        <label class="mb-4" th:text="${product.category.carac5}"></label>
	                        <input type="range" min="0" max="5" value="3" class="c5" id="note" th:value="${avis.c5}" name="c5">
	                        <label><span  id="demo"></span></label><br/><br/>  
	                   
	               
	           
	                  <div class="form-group">
	                    <label for="review">Your review *</label>
	                    <textarea  class="form-control" cols="30" rows="10" th:value="${avis.comment}" id="comment" name="comment"></textarea>
	                  </div>
	                 
                 
                  <div class="form-group">
                    <input type="submit" value="Submit your review" class="btn py-3 px-4 btn-primary">
                  </div>

                </form>
              </div>
            </div>

      </div></div></div></section>


       <footer class="footer ftco-section">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md-6 col-lg">
            <div class="ftco-footer-widget mb-4">
            
         
              <h2 class="logo mr-2"><a href="/"><img src="../static/images/logoooo.png" alt="logo" style="width:40px;" >Your Advancer</a></h2>
              <p>We analyze millions of reviews to find the best products for you.</p>
              <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-4">
                <li class="ftco-animate"><a href="#"><span class="fa fa-twitter"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="fa fa-facebook"></span></a></li>
                <li class="ftco-animate"><a href="#"><span class="fa fa-instagram"></span></a></li>
              </ul>
            </div>
          </div>
          <div class="col-md-6 col-lg">
            <div class="ftco-footer-widget mb-4 ml-md-5">
              <h2 class="ftco-heading-2">New Categories</h2>
              <ul class="list-unstyled">
              <div th:each="category : ${footercategories}">
                <li><a th:href="@{/Products/{Title}(Title=${category.Title})}" class="py-1 d-block"  th:text="${category.Title}"></a></li>
              </div>
              </ul>
            </div>
          </div>
          <div class="col-md-6 col-lg">
             <div class="ftco-footer-widget mb-4">
               <h2 class="ftco-heading-2">Main Pages</h2>
              <ul class="list-unstyled">
                <li><a href="../" class="py-1 d-block">Home</a></li>
                <li><a href="/#about" class="py-1 d-block">About</a></li>
                <li><a href="/user/add-product" class="py-1 d-block">Add Products</a></li>
                <li><a href="/Contact" class="py-1 d-block">Contact</a></li>
              </ul>
              
            </div>
          </div>
          <div class="col-md-6 col-lg">
            <div class="ftco-footer-widget mb-4">
            	<h2 class="ftco-heading-2">Development Team</h2>
            	
            	<div class="opening-hours">
	                <h4>LATRECH Wael</h4>
	                <h4>BALTI Nour</h4>
	                <h4>MAATOUG Mohamed zouhaier</h4>
	                <h4>DJEBALI Boutheina</h4>
	                <h4>MANSOUR Ibtihel</h4>
	                
	                  
	            </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-center">

            <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | Your Advancer <i class="fa fa-heart" aria-hidden="true"></i>
  <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
          </div>
        </div>
      </div>
    </footer>
    
  

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


  
 
        
        <script th:src="@{../../js/jquery.min.js}" ></script>
        <script th:src="@{../../js/jquery-migrate-3.0.1.min.js}"></script>
        <script th:src="@{../../js/popper.min.js}"></script>
        <script th:src="@{../../js/bootstrap.min.js}" ></script>
        <script th:src="@{../../js/jquery.easing.1.3.js}"></script>
        <script th:src="@{../../js/jquery.waypoints.min.js}"></script>
        <script th:src="@{../../js/jquery.stellar.min.js}"></script>
        <script th:src="@{../../js/jquery.animateNumber.min.js}"></script>
        <script th:src="@{../../js/bootstrap-datepicker.js}"></script>
        <script th:src="@{../../js/jquery.timepicker.min.js}"></script>
        <script th:src="@{../../js/owl.carousel.min.js}"></script>
        <script th:src="@{../../js/jquery.magnific-popup.min.js}"></script>
        <script th:src="@{../../js/scrollax.min.js}"></script>
        <script th:src="@{../../js/main.js}"></script>
         <script th:src="@{../../js/jquery-3.1.1.min.js}"></script>
  <script th:src ="@{../../js/bootstrap.js}"></script>   
  <script th:src="@{../../js/google-map.js}"></script>
  <script th:src="@{../../js/main.js}"></script>
  <script th:src="@{https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js}"></script>
        <script th:src="@{https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.2/jquery.rateyo.min.js}"></script>
        
  <script>
         var slider = document.getElementById("note");
         var output = document.getElementById("demo");
         output.innerHTML = slider.value;
         slider.oninput = function() {
              output.innerHTML = this.value;
         }
  </script>
  
    <script >
  
 var cr1 = document.getElementById("cr1").getAttribute("value");
 var cr2 = document.getElementById("cr2").getAttribute("value");
 var cr3 = document.getElementById("cr3").getAttribute("value");
 var cr4 = document.getElementById("cr4").getAttribute("value");
 var cr5= document.getElementById("cr5").getAttribute("value");
 
 
  var ratings = {
		  carac1 : cr1 , 
	      carac2:  cr2 ,
	      carac3 : cr3 , 
	      carac4:  cr4 ,
	      carac5 : cr5 
	     
	     
	    } 
  
  
//Total Stars
  const starsTotal = 5;

  // Run getRatings when DOM loads
  document.addEventListener('DOMContentLoaded', getRatings);

  // Form Elements
  const productSelect = document.getElementById('product-select');
  const ratingControl = document.getElementById('rating-control');

  // Init product
  let product;


  // Product select change
  productSelect.addEventListener('change', (e) => {
    product = e.target.value;
    // Enable rating control
    ratingControl.disabled = false;
    ratingControl.value = ratings[product];
  });

  // Rating control change
  ratingControl.addEventListener('blur', (e) => {
    const rating = e.target.value;

    // Make sure 5 or under
    if (rating > 5) {
      alert('Please rate 1 - 5');
      return;
    }

    // Change rating
    ratings[product] = rating;

    getRatings();
  });

  // Get ratings
  function getRatings() {
    for (let rating in ratings) {
      // Get percentage
      const starPercentage = (ratings[rating] / starsTotal) * 100;

      // Round to nearest 10
      const starPercentageRounded = `${Math.round(starPercentage / 10) * 10}%`;

      // Set width of stars-inner to percentage
      document.querySelector(`.${rating} .stars-inner`).style.width = starPercentageRounded;

      // Add number rating
      document.querySelector(`.${rating} .number-rating`).innerHTML = ratings[rating];
    }
  }

  </script>
    
  </body>
</html>